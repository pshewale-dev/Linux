import subprocess
import socket

def ping(host):
    # Ping the host using the system's ping command
    command = ['ping', '-c', '4', host]  # Change '-c' value to adjust the number of pings
    result = subprocess.run(command, stdout=subprocess.PIPE)
    output = result.stdout.decode('utf-8')

    # Check the output for successful ping
    if ' 0% packet loss' in output:
        return True
    else:
        return False

def telnet(host, port):
    # Create a TCP socket and attempt to connect to the host and port
    try:
        socket.create_connection((host, port), timeout=5)
        return True
    except (ConnectionRefusedError, socket.timeout):
        return False

# Read hosts from text file
with open('hosts.txt', 'r') as file:
    hosts = file.read().splitlines()

# Example usage
for host in hosts:
    print(f"Testing connectivity for {host}:")
    
    if ping(host):
        print("Ping test successful")
    else:
        print("Ping test failed")
    
    port1 = 80
    if telnet(host, port1):
        print(f"Telnet test successful on port {port1}")
    else:
        print(f"Telnet test failed on port {port1}")
    
    port2 = 443
    if telnet(host, port2):
        print(f"Telnet test successful on port {port2}")
    else:
        print(f"Telnet test failed on port {port2}")

    print()  # Print a blank line between each host
